!function(){"use strict";$(document).ready(function(){var t="jwt_auth_token";"localhost:3000"==location.host&&(t="dev_jwt_auth_token");var e=function(){$.ajax({method:"GET",url:"api/user/tos",headers:{Authorization:"Bearer "+localStorage.getItem(t)}}).done(function(t){t.tos_accepted||$("#myModal").modal("show")})};$(window).on("shown.bs.modal",function(){$("#myModal .modal-body").css("overflow-y","auto"),$("#myModal .modal-body").css("height",.8*$(window).height())});var i=localStorage.getItem(t);null!=i?e():$("#loginModal").modal("show"),$("#modal-button-accept").click(function(){$.ajax({method:"PUT",url:"api/user/tos",headers:{Authorization:"Bearer "+i},data:{tos_accepted:!0}}).done(function(){$("#myModal").modal("hide")})}),$("#loginButton").click(function(){$.ajax({method:"POST",url:"/auth/login",headers:{Authorization:"Bearer "+i},data:{email:$("#loginEmail").val(),password:$("#loginPassword").val()}}).success(function(i){localStorage.setItem(t,i.auth_token),$("#loginModal").modal("hide"),e()}).error(function(){$("#emailFormGroup, #passwordFormGroup").addClass("has-error")})})})}(window);