
<header class="page-main-header ng-scope">
  <div class="row">
    <div class="col-md-6">
      <h4>Custom Search</h4>
    </div>
  </div>
  <!--
  <div class="" id="appTypeHeaderLogo">
    <i class="fa fa-2" ng-class="customSearchCtrl.platform == 'ios' ? 'fa-apple' : 'fa-android'"></i>
  </div>
  -->
</header>

<div class="page page-table" data-ng-controller="TableCtrl">
  <div>
    <section class="panel panel-default table-dynamic" data-ng-controller="ListCtrl">
      <div class="panel-heading" id="listViewTableHeading">
        <strong><i class="fa fa-list panel-ico"></i>Results</strong> <span id="dashboardResultsTableHeadingNumDisplayed" ng-if="customSearchCtrl.numApps">| Displaying {{customSearchCtrl.appsDisplayedCount()}} of {{customSearchCtrl.numApps | number}}</span>
        <span class="ui-select pull-right">
          <select id="addSelectedToDropDown" ng-model="$root.addSelectedToDropdown" ng-change="customSearchCtrl.addSelectedTo($root.addSelectedToDropdown, $root.selectedAppsForList)" ng-disabled="$root.selectedAppsForList < 1">
           <option value="">Copy Selected to List</option>
           <option ng-repeat="option in $root.usersLists" value="{{option.id}}">{{option.name}}</option>
          </select>
        </span>
      </div>

      <div id="results-table-wrapper">
        <table class="table table-bordered table-striped table-responsive">
          <thead>
            <tr>
              <th class="selectAllCheckboxHeader">
                <select-all-checkbox apps="customSearchCtrl.apps"></select-all-checkbox>
              </th>
              <th class="resultsTableAppIcon"><div class="th normal-right-padding">
                App Name
                <span class="glyphicon glyphicon-chevron-up"
                      data-ng-click="customSearchCtrl.sortApps('name', 'asc')"
                      data-ng-class="{active: row == 'name'}"></span>
                <span class="glyphicon glyphicon-chevron-down"
                      data-ng-click=" customSearchCtrl.sortApps('name', 'desc')"
                      data-ng-class="{active: row == '-name'}"></span>
              </div></th>
              <th><div class="th normal-right-padding appDetailsHeader">
                App Type
              </div></th>
              <th class="resultsTableAppPublisher"><div class="th normal-right-padding">
                Publisher
                <span class="glyphicon glyphicon-chevron-up"
                      data-ng-click="customSearchCtrl.sortApps('publisher_name', 'asc')"
                      data-ng-class="{active: row == 'publisher_name'}"></span>
                <span class="glyphicon glyphicon-chevron-down"
                      data-ng-click=" customSearchCtrl.sortApps('publisher_name', 'desc')"
                      data-ng-class="{active: row == '-publisher_name'}"></span>
              </div></th>
              <th><div class="th normal-right-padding">
                Fortune Rank
                <span class="glyphicon glyphicon-chevron-up"
                      data-ng-click="customSearchCtrl.sortApps('fortune_rank', 'asc')"
                      data-ng-class="{active: row == 'fortune_rank'}"></span>
                <span class="glyphicon glyphicon-chevron-down"
                      data-ng-click=" customSearchCtrl.sortApps('fortune_rank', 'desc')"
                      data-ng-class="{active: row == '-fortune_rank'}"></span>
              </div></th>
              <th><div class="th normal-right-padding">
                Mobile Priority
                <span class="glyphicon glyphicon-chevron-up"
                      data-ng-click="customSearchCtrl.sortApps('mobile_priority', 'asc')"
                      data-ng-class="{active: row == 'mobile_priority'}"></span>
                <span class="glyphicon glyphicon-chevron-down"
                      data-ng-click=" customSearchCtrl.sortApps('mobile_priority', 'desc')"
                      data-ng-class="{active: row == '-mobile_priority'}"></span>
              </div></th>
              <th><div class="th normal-right-padding">
                Ad Spend
                <span ng-show="!canViewAdSpend || customSearchCtrl.platform == 'android'" class="glyphicon glyphicon-chevron-up"
                      data-ng-click="customSearchCtrl.sortApps('old_facebook_ads', 'desc')"
                      data-ng-class="{active: row == 'old_facebook_ads'}"></span>
                <span ng-show="!canViewAdSpend || customSearchCtrl.platform == 'android'" class="glyphicon glyphicon-chevron-down"
                      data-ng-click="customSearchCtrl.sortApps('old_facebook_ads', 'asc')"
                      data-ng-class="{active: row == '-old_facebook_ads'}"></span>
                <span ng-show="canViewAdSpend" class="glyphicon glyphicon-chevron-up"
                      data-ng-click="customSearchCtrl.sortApps('facebook_ads', 'desc')"
                      data-ng-class="{active: row == 'facebook_ads'}"></span>
                <span ng-show="canViewAdSpend" class="glyphicon glyphicon-chevron-down"
                      data-ng-click=" customSearchCtrl.sortApps('facebook_ads', 'asc')"
                      data-ng-class="{active: row == '-facebook_ads'}"></span>
              </div></th>
              <th class="resultsTableAppUserbase"><div class="th normal-right-padding">
                User Base Size
                <!-- <span class="glyphicon glyphicon-chevron-up"
                      data-ng-click="customSearchCtrl.sortApps('user_base_display_score', 'asc')"
                      data-ng-class="{active: row == 'user_base_display_score'}"></span>
                <span class="glyphicon glyphicon-chevron-down"
                      data-ng-click=" customSearchCtrl.sortApps('user_base_display_score', 'desc')"
                      data-ng-class="{active: row == '-user_base_display_score'}"></span> -->
              </div></th>
              <th><div class="th normal-right-padding">
                Categories
                <span class="glyphicon glyphicon-chevron-up"
                      data-ng-click="customSearchCtrl.sortApps('categories', 'asc')"
                      data-ng-class="{active: row == 'categories'}"></span>
                <span class="glyphicon glyphicon-chevron-down"
                      data-ng-click="customSearchCtrl.sortApps('categories', 'desc')"
                      data-ng-class="{active: row == '-categories'}"></span>
              </div></th>
              <th ng-if="canViewSupportDesk && customSearchCtrl.platform == 'ios'"><div class="th normal-right-padding">
                Support Desk
              </div></th>
              <th ng-if="customSearchCtrl.platform == 'android'"><div class="th normal-right-padding">
                Downloads
                <span class="glyphicon glyphicon-chevron-up"
                      data-ng-click="customSearchCtrl.sortApps('downloads', 'desc')"
                      data-ng-class="{active: row == 'downloads'}"></span>
                <span class="glyphicon glyphicon-chevron-down"
                      data-ng-click=" customSearchCtrl.sortApps('downloads', 'asc')"
                      data-ng-class="{active: row == '-downloads'}"></span>
              </div></th>
              <th><div class="th normal-right-padding">
                Last Updated
                <span class="glyphicon glyphicon-chevron-up"
                      data-ng-click="customSearchCtrl.sortApps('last_updated', 'desc')"
                      data-ng-class="{active: row == 'last_updated'}"></span>
                <span class="glyphicon glyphicon-chevron-down"
                      data-ng-click=" customSearchCtrl.sortApps('last_updated', 'asc')"
                      data-ng-class="{active: row == '-last_updated'}"></span>
              </div></th>
            </tr>
          </thead>

          <tbody data-ng-hide="customSearchCtrl.queryInProgress">
            <tr data-ng-repeat="app in customSearchCtrl.apps" class="{{!app.appAvailable ? 'faded' : ''}}">
              <td class="dashboardTableDataCheckbox">
                <checkable-checkbox app="app" apps="customSearchCtrl.apps"></checkable-checkbox>
              </td>
              <td class="resultsTableAppIcon">
                  <span>
                    <a href="#/app/{{app.type == 'IosApp' ? 'ios' : 'android'}}/{{app.id}}">
                      <img ng-src="{{app.icon}}" />
                      {{app.name}}
                      <i ng-if="app.price" class="fa fa-2 fa-usd"></i>
                    </a>
                  </span>
                  <span class="badge badge-primary" ng-if="$root.appIsNew(app)">New</span>
              </td>
              <td class="appTypeIndicator">
                <i class="fa fa-2" ng-class="app.type == 'IosApp' ? 'fa-apple' : 'fa-android'"></i>
              </td>
              <td class="resultsTableAppPublisher"><a ng-if="app.publisher.name" href="#/publisher/{{customSearchCtrl.platform}}/{{app.publisher.id}}">{{app.publisher.name}}</a></td>
              <td>{{app.fortuneRank}}</td>
              <td class="dashboardMobilePriorityView">
                <span ng-if="app.mobilePriority"><i class="fa fa-circle" ng-class="'status-' + app.mobilePriority"></i>{{app.mobilePriority | capitalize}}</span>
              </td>
              <td class="dashboardAdSpendView">
                <span ng-if="!isNaN(app.adSpend)">
                  <i class="fa fa-circle" ng-class="'status-' + app.adSpend"></i>{{app.adSpend ? 'Yes' : 'No'}}
                </span>
              </td>
              <td class="resultsTableAppUserbase">
                <span ng-if="customSearchCtrl.platform != 'ios'">{{app.userBase | capitalize}}</span>
                <span ng-if="customSearchCtrl.platform == 'ios' && app.userBases.length == 1">
                  <img ng-src="/lib/images/flags/{{app.userBase.country_code.toLowerCase()}}.png" />
                  {{app.userBase.user_base | capitalize}}
                </span>
                <a ng-if="customSearchCtrl.platform == 'ios' && app.userBases.length > 1" popover-trigger="mouseenter" uib-popover-template="'userBaseTemplate.html'" href="javascript:void(0)" class="popover-link">
                  <img ng-src="/lib/images/flags/{{app.userBase.country_code.toLowerCase()}}.png" />
                  {{app.userBase.user_base | capitalize}}
                </a>
                <script ng-if="customSearchCtrl.platform == 'ios' && app.userBases.length > 1" type="text/ng-template" id="userBaseTemplate.html">
                  <ul class="international-data">
                    <li ng-repeat="row in app.userBases">
                      <div class="flag flag-{{row.country_code.toLowerCase()}} pull-left"></div>
                      <span class="country">{{row.country}}:</span>
                      <span>{{row.user_base | capitalize}}</span>
                    </li>
                  </ul>
                </script>
              </td>
              <td>{{app.categories.join(', ')}}</td>
              <td ng-if="canViewSupportDesk && customSearchCtrl.platform == 'ios'">{{app.supportDesk | supportDeskName}}</td>
              <td ng-if="customSearchCtrl.platform == 'android'">{{app.downloadsMin | humanizeNum}}<span ng-show="app.downloadsMax"> - </span>{{app.downloadsMax | humanizeNum}}</td>
              <td>
                  <span ng-show="app.lastUpdatedDays >= 0 && app.lastUpdatedDays != null">
                    <span ng-class="customSearchCtrl.getLastUpdatedDaysClass(app.lastUpdatedDays)">
                      <strong>{{app.lastUpdatedDays}}</strong>
                    </span> days ago
                  </span>
              </td>
            </tr>
          </tbody>
        </table>
        <div id="dashboardTableStatusMessage" data-ng-show="customSearchCtrl.queryInProgress || !(customSearchCtrl.numApps > 0)">
          <h5 data-ng-hide="customSearchCtrl.appNum > 0 || customSearchCtrl.queryInProgress">No Items</h5>
          <div data-ng-show="customSearchCtrl.queryInProgress" id="wrap_spinner">
            <div class="loading outer">
              <div class="loading inner"></div>
            </div>
          </div>
        </div>

        <!-- Modals -->
        <aside ng-include="'/app/app/views/modals/list-create.html'"></aside>
        <aside ng-include="'/app/app/views/modals/list-delete.html'"></aside>
        <aside ng-include="'/app/app/views/modals/list-delete-selected.html'"></aside>

      </div>

      <footer class="table-footer">
        <div class="row">
          <div class="col-md-6 page-num-info">
            <!--
                <span>
                    Show
                    <select data-ng-model="numPerPage"
                            data-ng-options="num for num in numPerPageOpt"
                            data-ng-change="onNumPerPageChange()">
                    </select>
                    entries per page
                </span>
            -->
          </div>
          <div class="col-md-6 text-right pagination-container">
            <uib-pagination class="pagination-sm"
                        ng-model="customSearchCtrl.currentPage"
                        total-items="customSearchCtrl.numApps"
                        max-size="8"
                        ng-change="customSearchCtrl.onPageChange(customSearchCtrl.currentPage)"
                        items-per-page="customSearchCtrl.numPerPage"
                        rotate="false"
                        boundary-links="true"></uib-pagination>

          </div>
        </div>
      </footer>

    </section>
  </div>
</div>
